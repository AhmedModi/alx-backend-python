#!/bin/bash
# kurbeScript - Start local Kubernetes cluster and check status

# Exit if any command fails
set -e

# 1. Ensure minikube is installed
if ! command -v minikube &> /dev/null
then
    echo "❌ Minikube not found. Please install Minikube before running this script."
    exit 1
fi

# 2. Start Minikube (only if not already running)
if minikube status | grep -q "Running"
then
    echo "✅ Minikube is already running."
else
    echo "🚀 Starting Minikube..."
    minikube start
fi

# 3. Verify that the cluster is running
echo "🔍 Checking cluster info..."
kubectl cluster-info

# 4. Retrieve the available pods
echo "📦 Listing pods..."
kubectl get pods --all-namespaces
